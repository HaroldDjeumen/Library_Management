<Page
    x:Class="Librarymanage.Library_Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Librarymanage"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
    Title="Library_Page"
    Width="984"
    Height="661"
    mc:Ignorable="d">

    <Grid Background="#9370DB">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>

        <!--  Book List  -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  Search Bar and Back Button  -->
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Grid Width="70">
                        <Border
                            Margin="5"
                            Background="#E6E6FA"
                            BorderBrush="#4B0082"
                            BorderThickness="2"
                            CornerRadius="5,0,0,0">
                            <Button
                                Background="#E6E6FA"
                                Click="BackButton_Click"
                                Content=""
                                FontFamily="Segoe MDL2 Assets"
                                FontSize="25"
                                Foreground="#9370DB" />
                        </Border>
                    </Grid>

                    <Border
                        Grid.Row="0"
                        Grid.Column="1"
                        Margin="5"
                        Background="#E6E6FA"
                        BorderBrush="#4B0082"
                        BorderThickness="2">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <TextBox
                                x:Name="SearchBox"
                                Width="387"
                                Height="35"
                                Padding="4"
                                VerticalAlignment="Center"
                                FontSize="18"
                                Style="{StaticResource ModernTextbox}"
                                Tag="Search books by name or author..." />

                            <Button
                                Grid.Column="1"
                                Width="100"
                                Height="35"
                                Margin="0,0,1,0"
                                Padding="4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Background="#9370DB"
                                BorderThickness="0"
                                Click="SearchButton_Click"
                                Content="Search"
                                FontSize="18"
                                Foreground="White" />
                        </Grid>
                    </Border>
                </Grid>
            </StackPanel>

            <!--  Book Panel  -->
            <Border
                Grid.Row="1"
                Margin="5"
                Background="#E6E6FA"
                BorderBrush="#4B0082"
                BorderThickness="2">
                <ScrollViewer x:Name="bookPanel">
                    <ScrollViewer.Resources>
                        <Style BasedOn="{StaticResource ModernScrollBarStyle}" TargetType="ScrollBar" />
                    </ScrollViewer.Resources>

                    <!--  Main Grid holds all panels on top of each other  -->
                    <Grid>
                        <!--  Books Panel  -->
                        <WrapPanel
                            x:Name="BooksPanel"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Visibility="Collapsed" />

                        <!--  Reserve Panel  -->
                        <WrapPanel
                            x:Name="ReservePanel"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Visibility="Collapsed" />

                        <!--  Account Panel  -->
                        <WrapPanel
                            x:Name="AccountPanel"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Visibility="Collapsed" />

                        <!--  Preview Panel  -->
                        <Grid
                            x:Name="PreviewPanel"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Visibility="Collapsed">
                            <wv2:WebView2
                                x:Name="PreviewBrowser"
                                Width="576"
                                Height="470"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                DefaultBackgroundColor="White" />
                        </Grid>

                        <!--  Ebook Panel  -->
                        <WrapPanel
                            x:Name="EbookPanel"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Visibility="Collapsed" />
                    </Grid>
                </ScrollViewer>
            </Border>




            <!--  Horizontal Account Panel  -->
            <Border
                Grid.Row="2"
                Height="Auto"
                Margin="5"
                Padding="1"
                Background="#E6E6FA"
                BorderBrush="#4B0082"
                BorderThickness="2"
                CornerRadius="0,0,0,5">
                <Grid Margin="5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Circle Image  -->
                    <Ellipse
                        Grid.Column="0"
                        Width="60"
                        Height="60"
                        Margin="2"
                        Stroke="#4B0082"
                        StrokeThickness="2">
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="/Images/book1.png" />
                        </Ellipse.Fill>
                    </Ellipse>

                    <!--  User Name  -->
                    <TextBlock
                        x:Name="AccountName"
                        Grid.Column="1"
                        Margin="5"
                        VerticalAlignment="Center"
                        FontSize="18"
                        FontWeight="Bold"
                        Foreground="#4B0082"
                        Text="John Doe" />

                    <!--  Buttons  -->
                    <ScrollViewer
                        Grid.Column="2"
                        HorizontalScrollBarVisibility="Auto"
                        VerticalScrollBarVisibility="Disabled">
                        <StackPanel>
                            <StackPanel
                            Margin="5,0,0,0"
                            VerticalAlignment="Center"
                            Orientation="Horizontal">
                                <Button
                                x:Name="Reservation_Details"
                                Width="Auto"
                                Height="30"
                                Margin="5,5"
                                Padding="5"
                                Background="#4B0082"
                                Click="Reservation_clicked"
                                Content="Reserved Books"
                                FontSize="12"
                                FontWeight="Bold"
                                Foreground="White" />
                                <Button
                                x:Name="Library"
                                Width="Auto"
                                Height="30"
                                Margin="5,5"
                                Padding="5"
                                Background="#4B0082"
                                Click="Library_clicked"
                                Content="Libray"
                                FontSize="12"
                                FontWeight="Bold"
                                Foreground="White" />
                                <Button
                                x:Name="Account_Details"
                                Width="Auto"
                                Height="30"
                                Margin="5,5"
                                Padding="5"
                                Background="#4B0082"
                                Click="Accountdetail_clicked"
                                Content="Account Details"
                                FontSize="12"
                                FontWeight="Bold"
                                Foreground="White" />
                            </StackPanel>


                            <StackPanel
                            Margin="5,0,0,0"
                            VerticalAlignment="Center"
                            Orientation="Horizontal">
                                <Button
                                x:Name="Readebooks"
                                Width="Auto"
                                Height="30"
                                Margin="5,5"
                                Padding="5"
                                Background="#4B0082"
                                Click="Readebooks_clicked"
                                Content="Read Ebooks"
                                FontSize="12"
                                FontWeight="Bold"
                                Foreground="White" />
                                <Button
                                x:Name="Readmangas"
                                Width="Auto"
                                Height="30"
                                Margin="5,5"
                                Padding="5"
                                Background="#4B0082"
                                Click="Readmangas_clicked"
                                Content="Mangas"
                                FontSize="12"
                                FontWeight="Bold"
                                Foreground="White" />
                                <Button
                                x:Name="Readeducationbooks"
                                Width="Auto"
                                Height="30"
                                Margin="5,5"
                                Padding="5"
                                Background="#4B0082"
                                Click="educationbooks_clicked"
                                Content="Educational Books"
                                FontSize="12"
                                FontWeight="Bold"
                                Foreground="White" />
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>

        </Grid>

        <!--  Book Details  -->
        <Border
            Grid.Column="1"
            Margin="5"
            Padding="10,10,0,10"
            Background="#E6E6FA"
            BorderBrush="#4B0082"
            BorderThickness="2"
            CornerRadius="0,5,5,0">
            <ScrollViewer>
                <ScrollViewer.Resources>
                    <Style BasedOn="{StaticResource ModernScrollBarStyle}" TargetType="ScrollBar" />
                </ScrollViewer.Resources>
                <StackPanel x:Name="BookDetailsPanel" Visibility="Visible">
                    <Image
                        x:Name="BigCoverImage"
                        Width="Auto"
                        Height="300"
                        Margin="0,0,0,10"
                        Stretch="Uniform" />

                    <TextBlock
                        x:Name="BookTitle"
                        Margin="0,0,0,10"
                        FontSize="24"
                        FontWeight="Bold"
                        Foreground="#4B0082"
                        TextWrapping="Wrap" />
                    <TextBlock
                        x:Name="BookAuthor"
                        Margin="0,0,0,5"
                        FontSize="18"
                        FontStyle="Italic"
                        Foreground="Black"
                        TextWrapping="Wrap" />
                    <TextBlock
                        x:Name="BookReleaseDate"
                        Margin="0,0,0,5"
                        FontSize="16"
                        Foreground="Black" />
                    <TextBlock
                        x:Name="BookISBN"
                        Margin="0,0,0,5"
                        FontSize="16"
                        Foreground="Black" />
                    <TextBlock
                        x:Name="BookGenre"
                        Margin="0,0,0,5"
                        FontSize="16"
                        Foreground="Black" />
                    <TextBlock
                        x:Name="BookSummary"
                        Margin="0,10,0,0"
                        FontSize="16"
                        Foreground="Black"
                        TextWrapping="Wrap" />
                    <TextBlock
                        x:Name="BookAvail"
                        Margin="0,10,0,0"
                        FontSize="16"
                        Foreground="#4B0082"
                        TextWrapping="Wrap"
                        Visibility="Collapsed" />

                    <StackPanel
                        Margin="0,10,0,0"
                        HorizontalAlignment="Center"
                        Orientation="Horizontal">
                        <Button
                            x:Name="EbookButton"
                            Width="100"
                            Height="30"
                            Margin="5,0"
                            Background="#4B0082"
                            Click="EbookButton_Click"
                            Content="Read Ebook"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="White"
                            Visibility="Collapsed" />
                        <Button
                            x:Name="PreviewButton"
                            Width="100"
                            Height="30"
                            Margin="5,0"
                            Background="#4B0082"
                            Click="PreviewButton_Click"
                            Content="Preview Book"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="White"
                            Visibility="Collapsed" />
                    </StackPanel>

                    <StackPanel
                        x:Name="bookbutton"
                        Margin="5,0,0,0"
                        Orientation="Horizontal"
                        Visibility="Collapsed">
                        <Button
                            x:Name="OpenCalendarButton"
                            Width="Auto"
                            Height="30"
                            Margin="10,20,0,0"
                            Padding="5"
                            HorizontalAlignment="Center"
                            Background="#4B0082"
                            Click="OpenCalendarButton_Click"
                            Content="Reserve Book"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="White"
                            Visibility="Visible" />

                        <Button
                            x:Name="OpenPreviewButton"
                            Width="Auto"
                            Height="30"
                            Margin="10,20,10,0"
                            Padding="5"
                            HorizontalAlignment="Center"
                            Background="#4B0082"
                            Click="OpenPreviewButton_Click"
                            Content="Read Preview"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="White"
                            Visibility="Visible" />

                        <Button
                            x:Name="OpenEbookButton"
                            Width="Auto"
                            Height="30"
                            Margin="0,20,0,0"
                            Padding="5"
                            HorizontalAlignment="Center"
                            Background="#4B0082"
                            Click="OpenEbookButton_Click"
                            Content="Read E-book"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="White"
                            Visibility="Visible" />
                    </StackPanel>

                    <StackPanel
                        x:Name="CalenderView"
                        Margin="0,20,0,10"
                        Visibility="Collapsed">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>


                            <StackPanel
                                Grid.Column="0"
                                Margin="3"
                                HorizontalAlignment="Center">
                                <TextBlock
                                    Margin="0,0,0,10"
                                    HorizontalAlignment="Center"
                                    FontFamily="Segoe UI"
                                    FontSize="13"
                                    FontWeight="Bold"
                                    Foreground="#4B0082"
                                    Text="Select Reservation Date:" />

                                <Calendar
                                    x:Name="ReservationCalendar"
                                    Width="170"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    SelectedDatesChanged="ReservationCalendar_SelectedDatesChanged"
                                    Visibility="Visible" />
                            </StackPanel>

                            <StackPanel
                                Grid.Column="1"
                                Margin="3"
                                HorizontalAlignment="Center">
                                <TextBlock
                                    Margin="0,0,0,10"
                                    HorizontalAlignment="Center"
                                    FontFamily="Segoe UI"
                                    FontSize="13"
                                    FontWeight="Bold"
                                    Foreground="#4B0082"
                                    Text="Select Return Date:" />

                                <Calendar
                                    x:Name="ReturnCalendar"
                                    Width="170"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    SelectedDatesChanged="ReturnCalendar_SelectedDatesChanged" />
                            </StackPanel>


                        </Grid>
                    </StackPanel>

                    <StackPanel x:Name="ReservationPolicyText" Visibility="Collapsed">

                        <TextBlock
                            x:Name="SelectedReservationDateText"
                            FontSize="14"
                            Foreground="#4B0082" />

                        <TextBlock
                            x:Name="ReservationPolicyText1"
                            Margin="0,10,0,0"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="DarkOrange"
                            Text="⚠ Reservation Policy: "
                            TextWrapping="Wrap"
                            Visibility="Visible" />

                        <TextBlock
                            x:Name="ReservationPolicyText2"
                            FontSize="13"
                            TextWrapping="Wrap"
                            Visibility="Visible">
                            <Run Foreground="Red" Text="R50" />
                            <Run Foreground="Black" Text=" is charged for each week the book is late. Book must be in good condition, otherwise, a" />
                            <Run Foreground="Red" Text=" R200" />
                            <Run
                                Foreground="Black"
                                Language="en-za"
                                Text="fee will be charged." />
                        </TextBlock>
                    </StackPanel>

                    <Button
                        x:Name="ConfirmReservationButton"
                        Width="Auto"
                        Height="30"
                        Margin="0,20,0,0"
                        Background="#4B0082"
                        Click="ConfirmReservationButton_Click"
                        Content="Confirm Reservation"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White"
                        Visibility="Collapsed" />
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Page>
